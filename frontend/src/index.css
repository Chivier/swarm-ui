/* React Flow styles - must be first */
@import '@xyflow/react/dist/style.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom CSS variables */
:root {
  --background: 255 255 255;
  --foreground: 15 23 42;
  --primary: 14 165 233;
  --primary-foreground: 255 255 255;
  --muted: 241 245 249;
  --muted-foreground: 100 116 139;
  --border: 226 232 240;
}

.dark {
  --background: 15 23 42;
  --foreground: 248 250 252;
  --primary: 56 189 248;
  --primary-foreground: 15 23 42;
  --muted: 30 41 59;
  --muted-foreground: 148 163 184;
  --border: 51 65 85;
}

body {
  @apply bg-white text-slate-900 antialiased;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-slate-100;
}

::-webkit-scrollbar-thumb {
  @apply bg-slate-300 rounded;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-400;
}

/* React Flow customizations */
.react-flow__node {
  @apply shadow-md rounded-lg;
}

.react-flow__node.selected {
  @apply ring-2 ring-sky-500;
}

.react-flow__edge-path {
  @apply stroke-slate-400;
  stroke-width: 2;
}

.react-flow__edge.selected .react-flow__edge-path {
  @apply stroke-sky-500;
}

.react-flow__connection-line {
  stroke: #94a3b8;
  stroke-width: 2;
}

/* Handle styles - 4 directional connection points */
.react-flow__handle {
  @apply w-3 h-3 bg-white border-2 border-slate-300 rounded-full;
  @apply transition-all duration-150;
}

.react-flow__handle:hover {
  @apply border-sky-500 bg-sky-50 scale-125;
}

.react-flow__handle.connecting {
  @apply border-sky-500 bg-sky-100;
}

.react-flow__handle.valid {
  @apply border-emerald-500 bg-emerald-100;
}

.react-flow__handle.invalid {
  @apply border-rose-500 bg-rose-100;
}

/* Handle positions */
.react-flow__handle-top {
  top: -6px;
}

.react-flow__handle-right {
  right: -6px;
}

.react-flow__handle-bottom {
  bottom: -6px;
}

.react-flow__handle-left {
  left: -6px;
}

/* Target handles (inputs) - square style */
.react-flow__handle-top,
.react-flow__handle-left {
  @apply rounded-sm;
}

/* Source handles (outputs) - circle style */
.react-flow__handle-right,
.react-flow__handle-bottom {
  @apply rounded-full;
}

/* Node palette item */
.node-palette-item {
  @apply p-3 bg-white rounded-lg border border-slate-200 cursor-grab;
  @apply hover:border-sky-400 hover:shadow-sm transition-all;
}

.node-palette-item:active {
  @apply cursor-grabbing;
}

/* Mini map */
.react-flow__minimap {
  @apply rounded-lg border border-slate-200;
}

/* Controls */
.react-flow__controls {
  @apply rounded-lg border border-slate-200 shadow-sm;
}

.react-flow__controls-button {
  @apply border-b border-slate-200;
}

.react-flow__controls-button:last-child {
  @apply border-b-0;
}

.react-flow__controls-button:hover {
  @apply bg-slate-100;
}
